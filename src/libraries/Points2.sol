// SPDX-License-Identifier: Unlicense
pragma solidity >=0.8.0;

import {Util} from "src/libraries/Util.sol";
import {console2} from "forge-std/test.sol";

library Points2 {
    uint256 constant length = 64;
    bytes public constant bodyHexAscii =
        hex"313836313635313730313139313734313530313335313238313239313531313732313735313139313235313835313836313635313234313135313531313239313331313635313239313337313834313335313637313831313437313535313836313533313731313634313237313536313234313338313634313536313133313734313530313333313631313139313533313332313230313338313631313832313836313434313735313232313733313639313636313737313837313638313530313439313632313633313333313537313637313537313739313233313136313430313838313636313132313233313732313635313733313437313136313535313431313330313739313732313632313236313137313831313332313234313235313439313832313535313339313535313438313235313132313133313639313334313331313639313235313831313238313730313434313733313330313835313230313531313232313331313737313335313734313537313636313330313532";
    bytes public constant bodyHexUint =
        hex"baa5aa77ae9687808197acaf777db9baa57c73978183a58189b887a7b5939bba99aba47f9c7c8aa49c71ae9685a1779984788aa1b6ba90af7aada9a6b1bba89695a2a3859da79db37b748cbca6707baca5ad93749b8d82b3aca27e75b5847c7d95b69b8b9b947d7071a98683a97db580aa90ad82b978977a83b187ae9da68298";
    bytes public constant glintsHexAscii =
        hex"31343139373132303831313636373732313331393133333837313637373232323730343136363435313736333031313733383137383433303833393031323237373230363034313739343432313638313138323632313436383232313032323136363634313536313332313233333138333434313535303431343531383135313436303839363731333135343133343437313436343930393938363132353736313532343331353836323131363332313138363431363633373134303635313530363531343832313132383538313235363732313538323039353336313334363031303538343133393035313132303431393137353130363134323030353331383636393037363338313831303331323432373138373530313232363330383930353232343133313034313731373030363230373134313936393231373933393133383534313530333131353636383136353638313534373631343137323039343432313036393631333937373137323835313730303331393435323036353331313536333030363531333133353737313536353731353030343136303132313737333431363236363131313639313238363832303039353130323738313938373431353036383135303234313439303831333732343139383735313437333931303836383135323436313133393531393636303134333431313339303731353439343037353332313139353930393637313131333139303734303231383030323232313130313436383631363131333133363230313939383731343930393039373934313031383931333039323135353335313439303931333731363137313837313038383631333638313135333633313738383131373038323230353735";
    bytes public constant glintsHexUint =
        hex"37752f3141255347344b418458b0410544de2dda45b320c62ff5507c461854b14756395a521e41183cfd52f147a83c9038b63b2a2307336234873939270231203b8b3df62d702e5840fd36f13ad939e5323a3117544e25403494295836512bc44ae729764e5548ed1dd646b7308b493e2fe722c9578d28b1426e50ea4cec4613361e3ab73d3440b83c74375c24e229c836994385426b4bfc19833d0e197135093d293a9c3e8c45463f8a2ba132444e7f28264da23adc3ab03a3c359c4da339932a743b8e2c834ccc380536533c861d6c2eb725c72c371cea4652565e395e3ef135344e133a3d264227cd33243caf3a3d359443232a8635713c0345d942ba505f";
    bytes public constant motesHexAscii =
        hex"313733303934313037313933323036313237313037313933313530323130313933313933313733323036303934313237313530323130303934313237313933313037313037313037313530303930313933313933313037313933313037313933303934313733303930313530323036313237323036313733313530323130313530303930303934313237323036313237313933313037303930313530313530323130313733303934313037313037313933313933313237303934303934313733313237323036323036313237303934313733323130313530323130313530313933313933313237303934313037313037303934313733313237303934313733323036323036313733303930313530303930313530313530323130313037313037313530303930313733323036303930313530323036313733313733323036313037313037313530303930303930313530313237303934303934313237313237303934323036313733313237303934313933313933323036313237313237303934313237323036313530323130303934313237313237303934313530323130323130313530303930313530313530303930313733303934313037313933323036313237313037313933313530323130313933313933313733323036303934313237313530323130303934313237313933313037313037313037313530303930313933313933313037313933313037313933303934313733303930313530323036313237323036313733313530323130313530303930303934313237323036313237313933313037303930313530313530323130313733303934313037313037313933313933313237303934303934313733313237323036323036313237303934313733323130313530323130313530313933313933313237303934313037313037303934313733313237303934313733323036323036313733303930313530303930313530313530323130313037313037313530303930313733323036303930313530323036313733313733323036313037313037313530303930303930313530313237303934303934313237313237303934323036313733313237303934313933313933323036313237313237303934313237323036313530323130303934313237313237303934313530323130323130313530303930313530313530303930313733303934313037313933323036313237313037313933313530323130313933313933313733323036303934313237313530323130303934313237313933313037313037313037313530303930313933313933313037313933313037313933303934313733303930313530323036313237323036313733313530323130313530303930303934313237323036313237313933313037303930313530313530323130313733303934313037313037313933313933313237303934303934313733313237323036323036313237303934313733323130313530323130313530313933313933313237303934313037313037303934313733313237303934313733323036323036313733303930313530303930313530313530323130313037313037";
    bytes public constant motesHexUint =
        hex"ad5e6bc1ce7f6bc196d2c1c1adce5e7f96d25e7fc16b6b6b965ac1c16bc16bc15ead5a96ce7fcead96d2965a5e7fce7fc16b5a9696d2ad5e6b6bc1c17f5e5ead7fcece7f5eadd296d296c1c17f5e6b6b5ead7f5eadcecead5a965a9696d26b6b965aadce5a96ceadadce6b6b965a5a967f5e5e7f7f5ecead7f5ec1c1ce7f7f5e7fce96d25e7f7f5e96d2d2965a96965aad5e6bc1ce7f6bc196d2c1c1adce5e7f96d25e7fc16b6b6b965ac1c16bc16bc15ead5a96ce7fcead96d2965a5e7fce7fc16b5a9696d2ad5e6b6bc1c17f5e5ead7fcece7f5eadd296d296c1c17f5e6b6b5ead7f5eadcecead5a965a9696d26b6b965aadce5a96ceadadce6b6b965a5a967f5e5e7f7f5ecead7f5ec1c1ce7f7f5e7fce96d25e7f7f5e96d2d2965a96965aad5e6bc1ce7f6bc196d2c1c1adce5e7f96d25e7fc16b6b6b965ac1c16bc16bc15ead5a96ce7fcead96d2965a5e7fce7fc16b5a9696d2ad5e6b6bc1c17f5e5ead7fcece7f5eadd296d296c1c17f5e6b6b5ead7f5eadcecead5a965a9696d26b6b";

    function bodyAscii(uint256 _i) internal pure returns (string[2] memory) {
        uint256 pos = _i * 6;
        bytes memory x = new bytes(3);
        bytes memory y = new bytes(3);
        x[0] = bodyHexAscii[pos];
        x[1] = bodyHexAscii[pos + 1];
        x[2] = bodyHexAscii[pos + 2];
        y[0] = bodyHexAscii[pos + 3];
        y[1] = bodyHexAscii[pos + 4];
        y[2] = bodyHexAscii[pos + 5];
        return [string(x), string(y)];
    }

    function bodyUint(uint256 _i) internal pure returns (string[2] memory) {
        uint256 pos = _i * 2;

        string memory x = Util.uint256ToAscii(uint8(bodyHexUint[pos]));
        string memory y = Util.uint256ToAscii(uint8(bodyHexUint[pos + 1]));
        return [x, y];
    }

    function glintAscii(uint256 _i) internal pure returns (string[2] memory) {
        uint256 pos = _i * 10;
        bytes memory x = new bytes(6);
        bytes memory y = new bytes(6);
        x[0] = glintsHexAscii[pos];
        x[1] = glintsHexAscii[pos + 1];
        x[2] = glintsHexAscii[pos + 2];
        x[3] = ".";
        x[4] = glintsHexAscii[pos + 3];
        x[5] = glintsHexAscii[pos + 4];
        y[0] = glintsHexAscii[pos + 5];
        y[1] = glintsHexAscii[pos + 6];
        y[2] = glintsHexAscii[pos + 7];
        y[3] = ".";
        y[4] = glintsHexAscii[pos + 8];
        y[5] = glintsHexAscii[pos + 9];
        return [string(x), string(y)];
    }

    function glintUint(uint256 _i) internal pure returns (string[2] memory) {
        uint256 pos = _i * 4;
        uint256 xUint = uint8(glintsHexUint[pos]) * 256;
        xUint += uint8(glintsHexUint[pos + 1]);
        string memory x1 = _pad(Util.uint256ToAscii(xUint / 100), 3);
        string memory x2 = _pad(Util.uint256ToAscii(xUint % 100), 2);
        string memory x = string.concat(x1, ".", x2);

        uint256 yUint = uint8(glintsHexUint[pos + 2]) * 256;
        yUint += uint8(glintsHexUint[pos + 3]);
        string memory y1 = _pad(Util.uint256ToAscii(yUint / 100), 3);
        string memory y2 = _pad(Util.uint256ToAscii(yUint % 100), 2);
        string memory y = string.concat(y1, ".", y2);
        return [x, y];
    }

    function motesAscii(uint256 _i) internal pure returns (string[2][3] memory) {
        uint256 pos = _i * 18;
        string[2][3] memory result;
        uint256 j;
        for (; j < 3; ) {
            bytes memory x = new bytes(3);
            bytes memory y = new bytes(3);
            x[0] = motesHexAscii[6 * j + pos];
            x[1] = motesHexAscii[6 * j + pos + 1];
            x[2] = motesHexAscii[6 * j + pos + 2];
            y[0] = motesHexAscii[6 * j + pos + 3];
            y[1] = motesHexAscii[6 * j + pos + 4];
            y[2] = motesHexAscii[6 * j + pos + 5];
            result[j] = [string(x), string(y)];
            ++j;
        }
        return result;
    }

    function motesUint(uint256 _i) internal pure returns (string[2][3] memory) {
        uint256 pos = _i * 6;
        string[2][3] memory result;
        uint256 i;
        for (; i < 3; ) {
            string memory x = _pad(Util.uint256ToAscii(uint8(motesHexUint[pos + 2 * i])), 3);
            string memory y = _pad(Util.uint256ToAscii(uint8(motesHexUint[pos + 2 * i + 1])), 3);
            result[i] = [x, y];
            ++i;
        }
        return result;
    }

    function _pad(string memory _value, uint256 _length) internal pure returns (string memory) {
        uint256 paddingLength = _length - bytes(_value).length;
        string memory padding;
        uint256 i;
        for (; i < paddingLength; ) {
            padding = string.concat(padding, "0");
            unchecked {
                ++i;
            }
        }
        return string.concat(padding, _value);
    }
}
